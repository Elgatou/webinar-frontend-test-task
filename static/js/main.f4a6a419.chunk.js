(this["webpackJsonpwebinar-frontend-test-task"]=this["webpackJsonpwebinar-frontend-test-task"]||[]).push([[0],{78:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),i=(n(78),n(138)),d=n(45),s=n(65),l=n(137),j=n(24),b=n(14),u=n(130),O=n(132),f=n(135),h=n(133),m=n(142),x=n(134),p=n(64),g=n.n(p),v=n(127),y=n(62),I=n.n(y),k=n(139),w=n(53),S=n(23),C=n(66),E=n(6),D=Object(a.createContext)(null),T={todoItems:[],error:!1},N="todoListState",P=function(e){var t=e.children,n=Object(C.a)(B,T),r=Object(S.a)(n,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){function e(){var e=localStorage.getItem(N);if(e)try{c({type:"loadState",data:JSON.parse(e)})}catch(t){}}e(),window.addEventListener("storage",(function(t){return e()}))}),[]),Object(a.useEffect)((function(){try{localStorage.setItem(N,JSON.stringify(o.todoItems))}catch(e){c({type:"showError",data:e.message})}}),[o.todoItems]),Object(E.jsx)(D.Provider,{value:Object(b.a)(Object(b.a)({},o),{},{dispatch:c}),children:t})},L=function(){var e=Object(a.useContext)(D);if(!e)throw new Error("useTodoItems hook should only be used inside TodoItemsContextProvider");return e};function B(e,t){var n=t.data.index;switch(t.type){case"loadState":e.todoItems=t.data;break;case"add":e.todoItems.unshift(Object(b.a)({id:"".concat(Date.now().toString(36),"-").concat(Math.floor(1e16*Math.random()).toString(36)),done:!1},t.data.todoItem));break;case"delete":e.todoItems.splice(n,1);break;case"toggleDone":e.todoItems[n].done=!e.todoItems[n].done;break;case"dragAndDrop":var a=t.data,r=a.source,o=a.destination;if(o){var c=[e.todoItems[o.index],e.todoItems[r.index]];e.todoItems[r.index]=c[0],e.todoItems[o.index]=c[1]}break;case"showError":e.error=!0;break;case"closeError":e.error=!1;break;default:throw new Error}}var F={type:"spring",damping:25,stiffness:120,duration:.25},J=Object(v.a)({root:{listStyle:"none",padding:0}}),R=function(){var e=L().todoItems,t=J(),n=e.slice().map((function(e,t){return Object(b.a)(Object(b.a)({},e),{},{index:t})})).slice().sort((function(e,t){return e.done&&!t.done?1:!e.done&&t.done?-1:0})),a=L().dispatch;return Object(E.jsx)(w.a,{onDragEnd:function(e){a({type:"dragAndDrop",data:e})},children:Object(E.jsx)(w.c,{droppableId:"list-1",children:function(e){return Object(E.jsxs)("ul",Object(b.a)(Object(b.a)({ref:e.innerRef},e.droppableProps),{},{className:t.root,children:[n.map((function(e){return Object(E.jsx)(k.a.li,{transition:F,layout:!1,children:Object(E.jsx)(M,{item:e})},e.id)})),e.placeholder]}))}})})},A=Object(v.a)({root:{marginTop:24,marginBottom:24},doneRoot:{textDecoration:"line-through",color:"#888888"}}),M=function(e){var t=e.item,n=A(),r=L().dispatch,o=Object(a.useCallback)((function(){return r({type:"delete",data:{index:t.index}})}),[t.index,r]),c=Object(a.useCallback)((function(){return r({type:"toggleDone",data:{index:t.index}})}),[t.index,r]);return Object(E.jsx)(w.b,{draggableId:t.id,index:t.index,children:function(e,a){return Object(E.jsxs)(u.a,Object(b.a)(Object(b.a)(Object(b.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{className:I()(n.root,Object(j.a)({},n.doneRoot,t.done)),children:[Object(E.jsx)(O.a,{action:Object(E.jsx)(h.a,{"aria-label":"delete",onClick:o,children:Object(E.jsx)(g.a,{})}),title:Object(E.jsx)(x.a,{control:Object(E.jsx)(m.a,{checked:t.done,onChange:c,name:"checked-".concat(t.id),color:"primary"}),label:t.title})}),t.details?Object(E.jsx)(f.a,{children:Object(E.jsx)(d.a,{variant:"body2",component:"p",children:t.details})}):null]}))}})},W=n(141),V=Object(v.a)({root:{marginTop:10}}),q=function(){var e=L(),t=e.error,n=e.dispatch,r=V(),o=Object(a.useCallback)((function(){return n({type:"closeError",data:""})}),[n]);return Object(E.jsx)("div",{className:r.root,children:t?Object(E.jsx)(W.a,{onClose:o,severity:"error",children:"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u0432 localStorage, \u043d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"}):null})},H=n(54),z=n(140),G=n(136),K=Object(v.a)((function(){return{root:{marginBottom:24}}}));function Q(){var e=K(),t=L().dispatch,n=Object(H.b)(),a=n.control,r=n.handleSubmit,o=n.reset,c=n.watch;return Object(E.jsxs)("form",{onSubmit:r((function(e){t({type:"add",data:{todoItem:e}}),o({title:"",details:""})})),children:[Object(E.jsx)(H.a,{name:"title",control:a,defaultValue:"",rules:{required:!0},render:function(t){var n=t.field;return Object(E.jsx)(z.a,Object(b.a)(Object(b.a)({},n),{},{label:"TODO",fullWidth:!0,className:e.root}))}}),Object(E.jsx)(H.a,{name:"details",control:a,defaultValue:"",render:function(t){var n=t.field;return Object(E.jsx)(z.a,Object(b.a)(Object(b.a)({},n),{},{label:"Details",fullWidth:!0,multiline:!0,className:e.root}))}}),Object(E.jsx)(G.a,{variant:"contained",color:"primary",type:"submit",disabled:!c("title"),children:"Add"})]})}var U=Object(s.a)({palette:{primary:{main:"#9012fe"},secondary:{main:"#b2aabf"}}});function X(){return Object(E.jsxs)(i.a,{maxWidth:"sm",children:[Object(E.jsx)("header",{children:Object(E.jsx)(d.a,{variant:"h2",component:"h1",children:"Todo List"})}),Object(E.jsxs)("main",{children:[Object(E.jsx)(Q,{}),Object(E.jsx)(q,{}),Object(E.jsx)(R,{})]})]})}var Y=function(){return Object(E.jsx)(P,{children:Object(E.jsx)(l.a,{theme:U,children:Object(E.jsx)(X,{})})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(Y,{})}),document.getElementById("root")),Z()}},[[89,1,2]]]);
//# sourceMappingURL=main.f4a6a419.chunk.js.map